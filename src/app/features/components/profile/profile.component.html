<!--<div class="block-div">-->

<p-panel header="Προσωπικά στοιχεία">
  <p-tabView>
    <p-tabPanel header="Προφίλ">

      <p-progressSpinner *ngIf="this.userInfoView == false"></p-progressSpinner>

      <div *ngIf="this.userInfoView == true">

        <div class="row mb-3 pb-2 grid">
          <label class="col-fixed" style="width:120px; font-weight: bold;">Επώνυμο:</label>
            <div class="col">
              {{this.surname.value}}

              <p-skeleton *ngIf="!this.userInfoView" height="2rem" styleClass="p-mb-2"></p-skeleton>
            </div>
        </div>

        <div class="row mb-3 pb-2 grid">
          <label class="col-fixed" style="width:120px; font-weight: bold;">Όνομα:</label>
          <div class="col">
            {{this.name.value}}

            <p-skeleton *ngIf="!this.userInfoView" height="2rem" styleClass="p-mb-2"></p-skeleton>

          </div>
        </div>

        <div class="row mb-3 pb-2 grid">
          <label class="col-fixed" style="width:120px; font-weight: bold;">Email:</label>
          <div class="col">
            {{this.email.value}}

            <p-skeleton *ngIf="!this.userInfoView" height="2rem" styleClass="p-mb-2"></p-skeleton>

          </div>
        </div>

        <div class="row mb-3 pb-2 grid">
          <label class="col-fixed" style="width:120px; font-weight: bold;">Username:</label>
          <div class="col">
            {{this.username.value}}

            <p-skeleton *ngIf="!this.userInfoView" height="2rem" styleClass="p-mb-2"></p-skeleton>

          </div>
        </div>

        <div class="row mb-3 pb-2 grid">
          <label class="col-fixed" style="width:120px; font-weight: bold;">Ημ. Γέννησης:</label>
          <div class="col">
            {{this.birthDate.value}}

            <p-skeleton *ngIf="!this.userInfoView" height="2rem" styleClass="p-mb-2"></p-skeleton>

          </div>
        </div>

        <div class="row mb-3 pb-2 grid">
          <label class="col-fixed" style="width:120px; font-weight: bold;">Τηλέφωνο:</label>
          <div class="col">
            {{this.mobileNumber.value}}

            <p-skeleton *ngIf="!this.userInfoView" height="2rem" styleClass="p-mb-2"></p-skeleton>

          </div>
        </div>

        <div class="row mb-3 pb-2 grid">
          <label class="col-fixed" style="width:120px; font-weight: bold;">Α.Φ.Μ:</label>
          <div class="col">
            {{this.vatNumber.value}}

            <p-skeleton *ngIf="!this.userInfoView" height="2rem" styleClass="p-mb-2"></p-skeleton>

          </div>
        </div>

        <div class="row mb-3 pb-2 grid">
          <label class="col-fixed" style="width:120px; font-weight: bold;">Ρόλος:</label>
          <div class="col">
            {{this.role.value}}

            <p-skeleton *ngIf="!this.userInfoView" height="2rem" styleClass="p-mb-2"></p-skeleton>

          </div>
        </div>

        <div class="footer">
          <button pButton type="button" label="Επεξεργασία" icon="pi pi-pencil"
                  class="edit p-button-warning p-button-outlined"
                  (click)="editProfile()">
          </button>
        </div>
      </div>

    </p-tabPanel>

    <p-tabPanel header="Αρχεία">
      <p-progressSpinner *ngIf="!this.userInfoView"></p-progressSpinner>
      <table class="table table-hover" *ngIf="this.userInfoView">
        <tr>
          <td class="pb-2 pt-2" style="width: 40%;"><span></span></td>
          <td class="pb-2 pt-2" style="width: 20%;"><i class="pi pi-file-pdf open" style="font-size: 1.5rem"
                                                       (click)="getGdpr()"></i></td>
          <td class="pb-2 pt-2" style="width: 20%;">
            <div class="i.open">
              <p-fileUpload mode="basic"
                            #gdprUpload id="gdprFile" name="gdprFile[]" accept=".pdf"
                            [showUploadButton]="false" [showCancelButton]="false"
                            (onSelect)="onSelect($event, 'gdprFile', 'gdprFile')">
              </p-fileUpload>
            </div>
          </td>
          <td class="pb-2 pt-2" style="width: 20%;">
            <button pButton type="button" [hidden]="!isGdprFileUpload" label=""
                    icon="pi pi-upload" class="p-button-outlined p-button-secondary"
                    (click)="updateGdprFile()">
            </button>

          </td>
        </tr>
        <tr>
          <td class="pb-2 pt-2" style="width: 40%;"><span></span></td>
          <td class="pb-2 pt-2" style="width: 20%;"><i class="pi pi-file-pdf open" style="font-size: 1.5rem"
                                                       (click)="getAffirmation()"></i></td>
          <td class="pb-2 pt-2" style="width: 20%;">
            <div class="i.open">
              <p-fileUpload mode="basic"
                            #affirmationUpload id="affirmationFile" name="affirmationFile[]" accept=".pdf"
                            [showUploadButton]="false" [showCancelButton]="false"
                            (onSelect)="onSelect($event, 'affirmationFile', 'affirmationFile')">
              </p-fileUpload>
            </div>
          </td>
          <td>
            <button pButton type="button" [hidden]="!isAffirmationFileUpload" label=""
                    icon="pi pi-upload" class="p-button-outlined p-button-secondary"
                    (click)="updateAffirmationFile()">
            </button>
          </td>
        </tr>
      </table>
    </p-tabPanel>
  </p-tabView>
</p-panel>


<p-dialog header="Ανανέωση Προσωπικών Στοιχείων" [modal]="true" [(visible)]="profileEdit"
          [breakpoints]="{'960px': '75vw', '640px': '100vw'}" [style]="{width: '50vw'}"
          (onHide)="hideProfileDialog()">

  <div *ngIf="this.userInfoView">

    <p-progressSpinner *ngIf="!this.userInfoView"></p-progressSpinner>

    <form [formGroup]="profileForm" *ngIf="this.profileForm && this.userInfoView">

      <div class="row mt-2 mb-2 pt-2 pb-2 grid">
        <label class="col-fixed" style="width:120px; font-weight: bold;">Επώνυμο:</label>
        <div class="col">
          <input type="text" [formControl]="surname" class="p-inputtext-sm p-inputtext">

          <div *ngIf="surname?.invalid && (surname?.dirty || surname?.touched)">
            <small *ngIf="surname?.errors?.['required']" class="p-error">Το πεδίο είναι υποχρεωτικό.</small>
          </div>

        </div>
      </div>

      <div class="row mt-2 mb-2 pt-2 pb-2 grid">
        <label class="col-fixed" style="width:120px; font-weight: bold;">Όνομα:</label>
        <div class="col">
          <input type="text" [formControl]="name" class="p-inputtext-sm p-inputtext">

          <div *ngIf="name?.invalid && (name?.dirty || name?.touched)">
            <small *ngIf="name?.errors?.['required']" class="p-error">Το πεδίο είναι υποχρεωτικό.</small>
          </div>

        </div>
      </div>

      <div class="row mt-2 mb-2 pt-2 pb-2 grid">
        <label class="col-fixed" style="width:120px; font-weight: bold;">Email:</label>
        <div class="col">
          <input type="text" [formControl]="email" class="p-inputtext-sm p-inputtext">

          <div *ngIf="email?.invalid && (email?.dirty || email?.touched)">
            <small *ngIf="email?.errors?.['required']" class="p-error">Το πεδίο είναι υποχρεωτικό.</small>
          </div>

        </div>
      </div>

      <div class="row mt-2 mb-2 pt-2 pb-2 grid">
        <label class="col-fixed" style="width:120px; font-weight: bold;">Username:</label>
        <div class="col">
          <input type="text" [formControl]="username" class="p-inputtext-sm p-inputtext">

          <div *ngIf="username?.invalid && (username?.dirty || username?.touched)">
            <small *ngIf="username?.errors?.['required']" class="text-danger">Το πεδίο είναι υποχρεωτικό.</small>
          </div>

        </div>
      </div>

      <div class="row mt-2 mb-2 pt-2 pb-2 grid">
        <label class="col-fixed" style="width:120px; font-weight: bold;">Τηλέφωνο:</label>
        <div class="col">
          <input type="text" [formControl]="mobileNumber" class="p-inputtext-sm p-inputtext">

          <div *ngIf="mobileNumber?.invalid && (mobileNumber?.dirty || mobileNumber?.touched)">
            <small *ngIf="mobileNumber?.errors?.['required']" class="text-danger">Το πεδίο είναι υποχρεωτικό.</small>
          </div>

        </div>
      </div>

      <div class="row mt-2 mb-2 pt-2 pb-2 grid">
        <label class="col-fixed" style="width:120px; font-weight: bold;">Α.Φ.Μ:</label>
        <div class="col">
          <input type="text" [formControl]="vatNumber" class="p-inputtext-sm p-inputtext">

          <div *ngIf="vatNumber?.invalid && (vatNumber?.dirty || vatNumber?.touched)">
            <small *ngIf="vatNumber?.errors?.['required']" class="text-danger">Το πεδίο είναι υποχρεωτικό.</small>
          </div>

        </div>
      </div>

      <div class="row mt-2 mb-2 pt-2 pb-2 grid">
        <label class="col-fixed" style="width:120px; font-weight: bold;">Ημ. Γέννησης:</label>
        <div class="col">
          <p-calendar appendTo="body" [formControl]="birthDate"
            id="birthDate"
            dateFormat="dd/mm/yy"
            [showIcon]="true" dataType="string"
            inputId="birthDate">
          </p-calendar>

          <div *ngIf="birthDate?.invalid && (birthDate?.dirty || birthDate?.touched)">
            <small *ngIf="birthDate?.errors?.['required']" class="text-danger">Το πεδίο είναι υποχρεωτικό.</small>
          </div>

        </div>
      </div>

      <div class="dialog-footer">
        <button pButton type="button" label="Ακύρωση" icon="pi pi-times"
                class="p-button-danger p-button-outlined" (click)="hideProfileDialog()">
        </button>

        <button pButton type="button" label="Ανανέωση" icon="pi pi-refresh"
                class="p-button-outlined p-button-success" (click)="updateProfile()">
        </button>
      </div>

    </form>

  </div>

</p-dialog>

<!--</div>-->
